<!DOCTYPE html>

<html lang="pl">
<head>
<meta charset="UTF-8">
<title>Etheria Restart Speed Calculator</title>
<link rel="stylesheet" href="style.css">
</head>

<body>

<div class="box">

<h1>E:R pepega calc</h1>

<label>Choose char</label> <select id="hero">

<option>Ładowanie postaci...</option>
</select>

<label>Enemy speed</label> <input id="enemySpeed" type="number" placeholder="np. 340">

<label>Twój bonus speed z gearu</label> <input id="gearSpeed" type="number" placeholder="np. 120">

<button onclick="calculate()">Oblicz</button>

<div id="result"></div>

</div>

<script>

const sheetURL = "https://docs.google.com/spreadsheets/d/e/2PACX-1vSCQD7EM8DG1oZVexXto376AAHwiikJWgAENIRfBX_kFV4vqDXduenXAL9m0LUiju8HtdaWrQvOzw8j/pub?gid=613669233&single=true&output=csv";

let heroes = {};

fetch(sheetURL)
.then(response => response.text())
.then(csv => {

    const rows = csv.trim().split("\n");
    const select = document.getElementById("hero");

    select.innerHTML = "";

    for(let i=1;i<rows.length;i++){

        const cols = rows[i].split(",");

        const name = cols[0];
        const base = Number(cols[1]);
        const prowess = Number(cols[2]);

        heroes[name] = {base, prowess};

        const option = document.createElement("option");
        option.value = name;
        option.textContent = name;
        select.appendChild(option);
    }
});

function calculate(){

    const heroName = document.getElementById("hero").value;
    const enemy = Number(document.getElementById("enemySpeed").value);
    const gear = Number(document.getElementById("gearSpeed").value);

    const hero = heroes[heroName];

    if(!hero){
        document.getElementById("result").innerText = "Nie wybrano postaci.";
        return;
    }

    const mySpeed = hero.base + hero.prowess + gear;

    let text = "Twoja prędkość: " + mySpeed + "\n";

    if(mySpeed > enemy)
        text += "✅ Outspeedujesz przeciwnika";
    else if(mySpeed === enemy)
        text += "⚖️ Speed tie";
    else
        text += "❌ Przeciwnik szybszy";

    document.getElementById("result").innerText = text;
}

</script>

</body>
</html>

